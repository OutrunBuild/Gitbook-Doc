# Implied APY

The Implied Annualized Percentage Yield (Implied APY) is a dynamic metric used to estimate the expected true yield of the entire yield pool.

The Implied APY goes beyond the base interest rate of the underlying asset, incorporating the additional value generated by the behaviors of all users within the protocol (such as "lazy staking" and "early exit"). It is termed "implied" because it is a forward-looking estimate based on the current snapshot, which **updates in real-time as the pool's state changes**.

### **Core Concepts**

The YT anchor rate is a key indicator for measuring the value of YT, but **it starts from zero and is affected by the minting of new YT**, making it unsuitable for measuring the **real interest rate** of the entire staking pool.

**We need a more readable and stable metric to assess the yield potential of the entire staking pool**. One YT represents the claim to yields corresponding to "1 unit of principal locked for 1 day." Therefore, to calculate the true APY, we need to determine the expected returns that 1 YT can generate from this point forward and annualize that value.

The total value of one YT consists of two components:

* $$Y_{accrued}:$$  The claim to realized yields (the portion from the existing Yield Pool) $$Y_{accrued}$$, measured in SY.
* $$Y_{future}:$$  The claim to future yields (the portion from interest generated by locked assets in the future), measured in SY.

The $$Y_{future}$$ component, in turn, consists of two parts:

* $$Y_{certainty}:$$  The deterministic total yields expected to be generated by the current staking pool's non-expired positions before their maturity.
* $$Y_{uncertainty}:$$  The uncertain future yields generated by positions in the current staking pool that have matured but remain unredeemed (and could be redeemed at any time).

### **Precise Calculation Steps**

**Step 1: Define Variables**

* $$Y_{accrued}:$$  Total accumulated but unclaimed yields in the current Yield Pool.
* $$P_{locked}:$$  Total principal of yield-bearing assets currently locked and generating yields, measured in the accounting asset.
* $$P_{unlocked}:$$  Total principal of yield-bearing assets that are unlocked but unredeemed and still generating yields, measured in the accounting asset.
* $$D_{remaining}:$$  Weighted average remaining lock-up days, calculated by taking the weighted average of the remaining days of each locked position and its locked principal.
* $$YT_{supply}:$$  Total circulating supply of YT.
* $$APY_{underlying}:$$  Current real-time APY of the underlying yield-bearing token.
* $$EX:$$  Exchange rate of the yield-bearing token relative to the accounting asset.

**Step 2: Calculate the Deterministic Total Yields Expected in the Future** $$Y_{certainty}$$

This portion of yields is what the currently locked principal will generate in the future.

<p align="center"><span class="math">Y_{certainty} = \frac{P_{locked} \times APY_{underlying} \times D_{remaining}}{365 \times EX} </span></p>

**Step 3: Calculate the Uncertain Total Yields Expected in the Future** $$Y_{uncertainty}$$

<p align="center"><span class="math">Y_{uncertainty} = \frac{P_{unlocked} \times APY_{underlying}}{365 \times EX} </span></p>

**Step 4: Calculate the Expected Redeemable Value per YT** $$RV_{future}$$

Add the three values — **the deterministic total yields expected in the future**, **the uncertain total yields expected in the future**, and **the already accumulated yields**—then divide by the current YT supply to obtain the expected redeemable value per YT.

<p align="center"><span class="math">RV_{future} = \frac{Y_{accrued} + Y_{certainty} + Y_{uncertainty}}{YT_{supply}}</span></p>

$$RV_{future}$$ represents the total amount you can expect to receive in the future by holding 1 YT now.

**Step 5: Calculate the Implied APY**

Finally, convert this "value" into an "APY" using the **YT anchor rate calculation formula**.

<p align="center"><span class="math">APY_{implied} = \frac{ 365 \times RV_{future} \times SY_{total}}{SY_{total}-Y_{accrued}} </span></p>

The above derivation process may appear complex, but it accurately accounts for all dynamic factors.

### **Key Features**

*  **Dynamic Nature**: This is a real-time changing figure. Any user's staking, redemption, or YT burning actions in the pool will immediately alter the calculation parameters, instantly reflecting in the Implied APY of the staking pool.
* **Expectational Nature**: It is not a promised or guaranteed fixed rate. It is the best estimate based on the pool's state at that moment. The actual return for users will ultimately be the weighted average of the dynamic APY at each moment throughout the entire lock-up period.
