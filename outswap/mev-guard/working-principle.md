# 工作原理

**MEV Guard** 是**完全在链上运行的独立原生模块**，它非常简洁且无需引入外部链下系统，也并非类似 LBP 的代币发行机制。它通过对流动性池进行早期保护，有效缓解**初始流动性抢跑攻击** 。

### **针对初始流动性抢跑攻击**

初始流动性抢跑攻击（狙击交易）的核心特点是**在初始流动性部署的同一区块内一次性购买大量代币**，从而垄断代币的初始供应。因此 MEV Guard 的解决方案针对这一核心特点，**对初始流动性池部署后的一定范围内的区块进行保护**，其细节如下：

* **保护期设置：**&#x6839;据不同链的不同的区块时间，设置持续不同区块数量的初始流动性保护期，**通常持续数百个区块**。
* **随机性检查**：引入随机性检查，根据上个区块尝试执行的交易数量**动态调节概率**，未通过检查的交易会被**中断**而非 Revert，确保所有交易具有均等执行机会。
* **交易数量限制**：每个区块当前流动性池只能有一笔**可执行交易**，后续交易将会被**中断**，以减少女巫攻击的影响。
* **交易规模控制**：每笔交易代币最大数量不得超过总流动性池储备总量的 1%，防止代币供应被垄断。
* **保护期解除**：初始流动性保护期结束后，上述所有限制自动解除。

{% hint style="info" %}
**中断机制**：为记录每个区块尝试交易（包括失败交易）数量，交易失败不会 Revert，而是中断执行，并恢复到上一步交换状态（如果是多跳交易）。
{% endhint %}

通过以上措施，能有效避免 MEV 抢跑攻击，没有人可以提前预测自己的交易是否可执行，所有的交易在初始流动性保护期间都充满不确定性，并且交易规模受到限制，避免代币供应垄断。
