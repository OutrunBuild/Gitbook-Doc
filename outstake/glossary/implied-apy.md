---
description: Implied APY
---

# 隐含 APY

隐含年化收益率（Implied APY）是专为**有效质押（锁仓天数大于0）**&#x8BBE;计的一个动态、个人化的回报率指标。它预估了用户在 OutStake 模块中进行一次有效质押时，**基于当前池子状态和用户自己选择的锁仓天数**，能够获得的年化回报率。

Implied APY 超越了底层资产的基础利率，将协议内所有用户的行为（如“懒惰质押”和“提前退出”）所产生的额外价值都计算在内。之所以是“隐含的”，是因为它是一个基于当前快照的前瞻性估算，会**随着池子状态的变化而实时更新**。

### **核心概念：为有效质押而设计**

在传统的 DeFi 协议中，一个池子的 APY 通常对所有参与者都是相同的。然而，OutStake 的独特机制（用户可自定义锁仓天数、可随时燃烧 YT 赎回已积累的收益等）打破了这一常规。在OutStake 中，每个用户获得的回报率都因其个人策略和全池用户的集体行为而不同。

Implied APY 旨在回答一个核心问题：“**如果我现在投入本金，进行一次锁仓天数大于 0 的有效质押，我能期望获得多高的年化回报？**”

#### **边界条件：质押0天 (D=0)**

根据 OutStake 模块的基础规则，质押行为所铸造的 YT 数量由“**质押数量 × 锁仓天数** ”决定。

* 协议机制：当锁仓天数为 0 时，铸造的 YT 数量也为 0。由于YT是向收益池索取所有收益的唯一凭证，因此，D=0 的质押行为在协议层面的实际回报为 0。
* 指标规则：因此，当用户选择质押 0 天时，**Implied APY** 被定义为 0%。这并非一个数学计算的结果，而是对协议基础规则的直接反映。本 APY 公式是为计算 **D>0** 的**有效质押**而设计的。

#### **计算解析 (适用于 D > 0 的情况)**

用户的 Implied APY 由两部分截然不同的收益来源相加而成。这清晰地反映了用户质押后所获得价值的构成：

**Implied APY** = 来自**存量收益**的 APY + 来自**未来收益**的 APY

1\. 来自存量收益的 APY

* 它是什么？这是用户通过质押，获得的**按比例分享收益池中已经存在的所有历史累积收益（`Y_accrued`）**&#x7684;权利。
* 如何影响用户？池中累积的未分配收益越多，这一部分的 APY 就越高。这是一个全局性的回报，反映了池子的历史厚度。
* 计算公式：

<p align="center"><span class="math">APY_{past} = \frac{Y_{accrued} \cdot SY_{total} \cdot 365}{YT_{supply}(SY_{total}-Y_{accrued})}</span></p>

2\. 来自未来收益的 APY

* 它是什么？ 这是在用户自己选择的锁仓 D 天内，**质押池中所有的生息代币（`SY_total`，包括用户自己的和别人的）**&#x4E3A;用户的这份质押所产生的预期回报。
* 如何影响用户？ 这是回报率中完全个性化的部分。
  * 用户的锁仓天数 D 是关键：用户选择的 D 越长，用户铸造的 YT 就越多，对未来收益的索取权重就越大，从而直接提升这一部分的APY。
  * 质押池的当前效率：池中“懒惰”的用户越多（即到期未取回的 SY 越多），**`SY_total`** 就越高，用户的未来收益也越高。反之，如果有人提前燃烧YT，**`YT_supply`** 会减少，同样会提高用户的未来收益率。
*   计算公式:

    <p align="center"><span class="math">APY_{\text{future}}(D) = \frac{D \times SY_{\text{total}} \times APY_{\text{underlying}}}{YT_{\text{supply}}}</span></p>

**最终 APY 计算表达式**

$$
APY_{\text{implied}}(D) = \underbrace{\left( \frac{Y_{accrued} \cdot SY_{total} \cdot 365}{YT_{supply}(SY_{total}-Y_{accrued})} \right)}_{APY_{\text{past}}} + \underbrace{\left( \frac{D \times SY_{\text{total}} \times APY_{\text{underlying}}}{YT_{\text{supply}}} \right)}_{APY_{\text{future}}(D)}
$$

&#x20;            当 $$D = 0$$ 时，$$APY_{\text{implied}}=0%$$

**关键特征**

* 个性化：用户的 APY 不是一个固定的池子利率，而是与用户输入的锁仓天数 D 直接相关。这是用户主动决策的结果。
* 动态性：这是一个实时变化的数字。池中任何用户的质押、赎回、燃烧 YT 行为，都会立刻改变 **`SY_total`**、**`Y_accrued`** 和 **`YT_supply`**，从而立即反映在用户头寸的 Implied APY 上。
* 预期性 ：它不是一个被承诺的、保证不变的利率。它是基于用户质押那一刻的池子状态为用户计算出的最佳预期。用户最终的实际回报，将是用户在整个锁仓期间，每一刻动态 APY 的加权平均结果。
